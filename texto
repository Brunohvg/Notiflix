import requests
import qrcode
from PIL import Image

url = "https://zap.lojabibelo.com.br/instance/create"
headers = {
    "accept": "application/json",
    "apikey": "123456",
    "Content-Type": "application/json",
}
data = {
    "instanceName": "BrunoVidal",
    "token": "ccgsa08@@",
    "qrcode": True,
}

response = requests.post(url, headers=headers, json=data)

response_data = response.json()

# Extrair o código do QR da resposta
qr_code_data = response_data.get("qrcode", {}).get("code")

if qr_code_data:
    # Criar um objeto QR Code
    qr = qrcode.QRCode(
        version=1,
        error_correction=qrcode.constants.ERROR_CORRECT_L,
        box_size=10,
        border=4,
    )
    qr.add_data(qr_code_data)
    qr.make(fit=True)

    # Criar uma imagem PIL
    img = qr.make_image(fill_color="black", back_color="white")

    # Exibir a imagem do QR Code
    img.show()
else:
    print("Código QR não encontrado na resposta da API.")
